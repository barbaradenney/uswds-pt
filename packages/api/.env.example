# ==============================================================================
# USWDS-PT API — Environment Variables
# ==============================================================================
# Copy this file to .env and fill in the values for your environment.
# Lines prefixed with # are commented out and show their default values.

# ==============================================================================
# REQUIRED: Database
# ==============================================================================

# PostgreSQL connection string (Supabase or local).
# The API will not start without a valid, reachable database.
# Example (Supabase): postgresql://postgres.[ref]:[password]@aws-0-us-east-1.pooler.supabase.com:5432/postgres
# Example (local):    postgresql://uswds_pt:password@localhost:5432/uswds_pt
DATABASE_URL=

# ==============================================================================
# REQUIRED (production): Authentication
# ==============================================================================

# Secret key used to sign and verify JWT tokens.
# CRITICAL: In production (NODE_ENV=production), the server exits immediately
# if this variable is not set. In development, it falls back to an insecure
# default ("development-secret-change-in-production").
# Recommended: use a random string of at least 32 characters.
JWT_SECRET=change-me-to-a-random-secret

# ==============================================================================
# OPTIONAL: Server
# ==============================================================================

# Port the API server listens on.
# Default: 3001
# PORT=3001

# Host/IP address the server binds to.
# Default: 0.0.0.0 (all interfaces)
# HOST=0.0.0.0

# Node environment. Controls logging format, trust-proxy, error detail, and
# the JWT_SECRET requirement above.
# Values: "development" | "production"
# Default: undefined (treated as development)
# NODE_ENV=development

# Database SSL mode. Controls TLS settings for the PostgreSQL connection.
# Values:
#   "true" or "verify" → strict SSL (rejectUnauthorized: true) — use for self-hosted DBs with trusted certs
#   "false"            → no SSL (use for Docker bridge or local development without SSL)
#   (unset)            → auto: production uses SSL without strict cert verification (Supabase-compatible);
#                         development uses no SSL
# Default: auto
# DB_SSL=

# ==============================================================================
# OPTIONAL: CORS
# ==============================================================================

# Primary frontend URL added to the CORS allowed-origins list.
# Default: http://localhost:3000
# Note: http://localhost:5173 (Vite dev server) is always allowed automatically.
# FRONTEND_URL=http://localhost:3000

# Additional CORS origins as a comma-separated list.
# Useful when you have multiple frontends (e.g., staging + production).
# Example: https://staging.example.com,https://app.example.com
# When not set, only FRONTEND_URL and localhost:5173 are allowed.
# CORS_ORIGINS=

# ==============================================================================
# OPTIONAL: Logging
# ==============================================================================

# Pino log level. Controls verbosity of server logs.
# Values: "fatal" | "error" | "warn" | "info" | "debug" | "trace"
# Default: info
# In development, logs are pretty-printed; in production, logs are JSON.
# LOG_LEVEL=info

# ==============================================================================
# OPTIONAL: AI Copilot (Server-Side Proxy)
# ==============================================================================
# API key for the AI provider. The editor proxies AI requests through
# POST /api/ai/chat so this key is never exposed in the browser.

# AI provider API key (Anthropic or OpenAI).
# When not set, the /api/ai/chat endpoint returns 503.
# AI_API_KEY=

# AI provider to use.
# Values: "claude" | "openai"
# Default: claude
# AI_PROVIDER=claude

# AI model name. Uses the provider's recommended default when omitted.
# Default for claude: claude-sonnet-4-20250514
# Default for openai: gpt-4o
# AI_MODEL=claude-sonnet-4-20250514
